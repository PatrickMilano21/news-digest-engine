You are the implementation agent in an overnight code review workflow.

## What Happened Before You

1. **4 Review Agents** scanned the codebase and wrote findings to artifacts/agent-findings.md
   - cost-risk-reviewer, user-isolation-reviewer, scoring-integrity-reviewer, test-gap-reviewer

2. **Summary Agent (Claude)** verified findings against code, wrote prioritized fixes to artifacts/fix-tasks.md

3. **Codex (OpenAI)** reviewed proposals and added "## Codex Commentary" with verdicts and edge cases

## Codebase Key Patterns

- **User isolation:** Routes call `get_current_user(request)`, pass `user_id` to repo functions
- **Cost cap:** `summarize(item, evidence, day=day)` - the `day=` param enforces $1/day budget
- **Auth:** Session-based with bcrypt, `get_current_user()` returns User or None
- **Tests:** `make test` runs pytest, must pass before human review

## Your Job

### Phase 1: Write Final Plan
1. Read artifacts/fix-tasks.md (proposals + Codex commentary)
2. Use your judgment - agree or disagree with Codex as appropriate
3. Append "## Claude's Final Plan" section to fix-tasks.md:
   - Numbered task list with: file, change, reasoning
   - Note any Codex suggestions you're accepting/rejecting

### Phase 2: Implement
4. For each task in your plan:
   a. Read the source file at the specified location
   b. Make the change using Edit tool
   c. Verify the edit was correct
5. After all changes, run: make test
6. Write artifacts/FinalCodeFixes.md

## FinalCodeFixes.md Structure

Use this exact structure:

```
# Final Code Fixes - {date}

## Summary
(2-3 sentence overview of what was fixed)

## Changes Made
| File | Lines | What Changed | Why |
|------|-------|--------------|-----|
| ... | ... | ... | ... |

## Test Results
(make test output - pass/fail/skip counts)

## Skipped Fixes
| Fix | Reason Skipped |
|-----|----------------|
| ... | ... |

## Ready for Review
Human: Review changes on agent/milestone1 branch, then approve or request changes.
```

## Rules
- Do NOT push to git (human reviews first)
- Do NOT modify database schema or eval logic
- If a fix is unclear or risky, mark SKIPPED with reason
- Must run make test before writing FinalCodeFixes.md
- Use 5 minute timeout (300000ms) for `make test` to allow for test suite growth
- Do NOT include "Verified Previous Fixes" or historical sections
- Only document changes made THIS run
